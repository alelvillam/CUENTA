<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veterinaria</title>
    <link rel="stylesheet" href="box.css">
</head>
<body>  
<header>Veterinaria SunnyPaws</header>

<div class="container" id="form-container">
  <form id="register-form">
    <h3>Crear cuenta</h3>
    <label>Nombre de usuario</label>
    <input type="text" id="usuario" required />

    <label>Correo electr√≥nico</label>
    <input type="email" id="correo" required />

    <label>Contrase√±a</label>
    <div class="toggle">
      <input type="password" id="password" required />
      <span class="toggle-icon" onclick="togglePassword()">üëÅ</span>
    </div>

    <small class="error" id="pass-error"></small>
    <button type="submit">Registrarse</button>
  </form>

  <form id="login-form" style="display:none">
    <h3>Iniciar sesi√≥n</h3>
    <label>Usuario</label>
    <input type="text" id="login-usuario" required />
    <label>Contrase√±a</label>
    <input type="password" id="login-password" required />
    <small><a href="#">¬øOlvidaste tu contrase√±a?</a></small>
    <button type="submit">Entrar</button>
  </form>

  <form id="cita-form" style="display:none">
    <h3>Agendar Cita M√©dica</h3>
    <label>Nombre del due√±o</label>
    <input type="text" id="duenio" required />

    <label>Nombre de la mascota</label>
    <input type="text" id="mascota" required />

    <label>Fecha</label>
    <input type="date" id="fecha" required />

    <label>Hora</label>
    <input type="time" id="hora" required />

    <label>S√≠ntomas</label>
    <textarea id="sintomas" required></textarea>

    <button type="submit">Confirmar Cita</button>
  </form>

  <div id="resultado" style="display:none">
    <h3>‚úÖ Cita Confirmada</h3>
    <p id="resumen"></p>
  </div>
</div>
<script>
  const passwordInput = document.getElementById('password');
  const errorPass = document.getElementById('pass-error');

  function togglePassword() {
    passwordInput.type = passwordInput.type === "password" ? "text" : "password";
  }

  // VALIDACI√ìN DE REGISTRO
  document.getElementById("register-form").addEventListener("submit", function (e) {
    e.preventDefault();
    const usuario = document.getElementById("usuario").value;
    const correo = document.getElementById("correo").value;
    const pass = passwordInput.value;

    // Expresi√≥n regular para contrase√±a segura
    const regex = /^(?=.[A-Z])(?=.\d)(?=.[!@#$%^&]).{8}$/;

    if (!regex.test(pass)) {
      errorPass.textContent = "Contrase√±a inv√°lida (8 caracteres, 1 may√∫scula, 1 n√∫mero, 1 s√≠mbolo)";
      return;
    }

    errorPass.textContent = ""; // limpia error si est√° todo bien
    alert("Registro exitoso. Ahora puedes iniciar sesi√≥n.");
    this.style.display = "none";
    document.getElementById("login-form").style.display = "block";
  });

  // VALIDACI√ìN DE LOGIN
  document.getElementById("login-form").addEventListener("submit", function (e) {
    e.preventDefault();
    const user = document.getElementById("login-usuario").value;
    const pass = document.getElementById("login-password").value;

    // Validaci√≥n b√°sica simulada
    if (user === "admin" && pass === "Admin123!") {
      alert("Inicio de sesi√≥n correcto.");
      this.style.display = "none";
      document.getElementById("cita-form").style.display = "block";
    } else {
      alert("Credenciales incorrectas. Usa admin / Admin123!");
    }
  });

  // ENV√çO DE FORMULARIO DE CITA
  document.getElementById("cita-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const duenio = document.getElementById("duenio").value;
    const mascota = document.getElementById("mascota").value;
    const fecha = document.getElementById("fecha").value;
    const hora = document.getElementById("hora").value;
    const sintomas = document.getElementById("sintomas").value;

    const ficha = Math.floor(Math.random() * 9000 + 1000); // n√∫mero aleatorio

    const resumen = `
      <strong>Due√±o:</strong> ${duenio}<br>
      <strong>Mascota:</strong> ${mascota}<br>
      <strong>Fecha:</strong> ${fecha}<br>
      <strong>Hora:</strong> ${hora}<br>
      <strong>S√≠ntomas:</strong> ${sintomas}<br><br>
      ‚úÖ Cita confirmada. Su n√∫mero de ficha es: <strong>${ficha}</strong>
    `;

    document.getElementById("cita-form").style.display = "none";
    document.getElementById("resultado").style.display = "block";
    document.getElementById("resumen").innerHTML = resumen;
  });
</script>
</body>
</html>